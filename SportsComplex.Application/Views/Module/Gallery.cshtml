@using SportsComplex.Application.Helper
@using SportsComplex.Models
@model List<SportsComplex.Application.ViewModels.ImageViewModel>

@{
    var principal = (CustomPrincipal)HttpContext.Current.User;
    switch (principal.Role)
    {
        case UserRoles.Employee:
            Layout = "~/Views/Shared/_EmployeeLayout.cshtml";
            break;
        case UserRoles.Admin:
            Layout = "~/Views/Shared/_AdminLayout.cshtml";
            break;
    }
}

@section scripts
{
    <link href="~/Content/jquery.fancybox.css" rel="stylesheet" />
    <style type="text/css">
        .imgBox {
            width: 204px;
            height: 200px;
            opacity: 1.0;
            filter: alpha(opacity=100);
        }

            .imgBox:hover {
                -moz-box-shadow: 0 0 10px #ccc;
                -webkit-box-shadow: 0 0 10px #ccc;
                box-shadow: 0 0 10px #ccc;
                opacity: 0.4;
                filter: alpha(opacity=40);
            }
    </style>

    <script src="~/Scripts/jquery.fancybox.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#ShowImage").fancybox({
                openEffect: 'elastic',
                closeEffect: 'fade',
                helpers:
                {
                    title:
                    {
                        type: 'float'
                    }
                }
            });
        });
    </script>
}

<div class="container" style="margin-top: 10px">
    <p>
        <a class="imageGallery btn btn-primary" data-fancybox-type="iframe" href="@Url.Action("UploadImage", "Module")">Upload Images</a>
        <a class="imageGallery btn btn-primary" data-fancybox-type="iframe" href="@Url.Action("DeleteImage", "Module")">Delete Images</a>
    </p>
    <div style="border-bottom:1px solid blue;"></div>
    @if (Model.Count > 0)
    {
        <div class="row-fluid">
            @foreach (var image in Model)
            {
                <div style="margin: 10px; display: inline-block; text-align: center; overflow: hidden;">
                    @if (principal.Role == UserRoles.Admin)
                    {
                        <input data-val="true" style="margin-bottom: 5px" id="imageSelected" name="imageSelected" type="checkbox" value="@image.IsSelected"/>
                    }
                    <div>
                        <a id="ShowImage" class="fancybox-button" data-rel="fancybox-button" title="@image.Name" href="@Url.Content(image.EncodedImage)">
                            <div class="zoom">
                                <img src="@image.EncodedImage" class="imgBox"/>
                                @if (principal.Role == UserRoles.Admin)
                                {
                                    <div>
                                        <span>@image.Name</span>
                                    </div>
                                }
                                <div class="zoom-icon"></div>
                            </div>
                        </a>
                    </div>
                </div>
            }
        </div>
    }
</div>
